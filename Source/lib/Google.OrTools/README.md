# Как собрать библиотеку Google.OrTools.dll под винду
Немного предыстории зачем все это надо. На Windows GTK# только 32-х битный поэтому само приложение может быть только 32-х битное. 32-х битные приложения не могут использовать 64-х битные библиотеку. Библиотека Google.OrTools начиная с вести 5 собирается самими разработчиками только в 64-х битном варианте. 32-х битные бинарники они перестали выкладывать. А нам нужна версия на текущий момент не ниже 6.4. Мы используем метод AddDimensionWithVehicleTransits который появился в шарп биндинге только в этой версии.

## Подготавливаем сборочное окружение

Собирать нужно на винде, в Visual Studio. Я собирал на 32-х битной винде, поэтому вопрос как выбрать именно 32-х битную сборку не стоял, я не мог собрать, ничего другого. Так же я использовал последнюю версию студии Visual Studio 2017 Community Edition.
В целом действовать нужно по инструкции отсюда https://developers.google.com/optimization/introduction/installing#windows_source Здесь я укажу свои дополнения, так как инструкция не достаточно подробна.

1. Устанавливаем Visual Studio 2017. Ее нужно установить с кучей дополнительный компонентов. Компоненты подбирались методом тыка, поэтому минимально необходимый набор не известен. Прилагаю снимок к компонентов, с которыми все собралось. ![Компоненты Visual Studio](Visual Studio Components.png) Питон тоже нужен(2017-я студия ставилась именно для этой сборки, возможно еще нужна Java, но у меня стояла. Я не знаю.)
1. Устанавливаем Git и CMake 3, по ссылкам из оригинальной инструкции.
1. Устанавливаем SVN. Можно любой. Я ставил TortoiseSVN, обратите внимание что нам нужна именно командная строка а именно svn.exe, при установке по умолчанию TortoiseSVN, устанавливает только графический интерфейс. В момент установки нужно еще выбрать галочку для установки командной строки.

## Непосредственно сборка
Дальше действуем полностью по оригинальной инструкции. Сначала собираем сторонние компоненты, потом саму библиотеку для sharp.

Если окружение установлено полностью, то все должно собраться. Единственное желательно перезагрузить компьютер после установки окружения. Так как у меня что-то установленное подхватилось только после перезагрузки.
